fix the issue where the state doesn't change when the user logs in
